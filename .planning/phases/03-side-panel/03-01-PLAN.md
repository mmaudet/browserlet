---
phase: 03-side-panel
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - wxt.config.ts
  - _locales/en/messages.json
  - _locales/fr/messages.json
autonomous: true

must_haves:
  truths:
    - "npm install succeeds with new dependencies"
    - "Monaco editor workers are configured for Vite"
    - "i18n messages load for English and French"
  artifacts:
    - path: "package.json"
      provides: "All new dependencies"
      contains: "monaco-editor"
    - path: "wxt.config.ts"
      provides: "Monaco Vite plugin + default_locale"
      contains: "monacoEditorPlugin"
    - path: "_locales/en/messages.json"
      provides: "English translations"
      contains: "appName"
    - path: "_locales/fr/messages.json"
      provides: "French translations"
      contains: "appName"
  key_links:
    - from: "wxt.config.ts"
      to: "monaco-editor"
      via: "vite-plugin-monaco-editor"
      pattern: "monacoEditorPlugin"
---

<objective>
Install Phase 3 dependencies and configure Monaco Editor for YAML editing with i18n support.

Purpose: Establish the foundation for Monaco Editor integration and French/English internationalization before building UI components.
Output: Dependencies installed, Monaco configured in Vite, i18n locale files created.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-side-panel/03-RESEARCH.md
@wxt.config.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install npm dependencies</name>
  <files>package.json</files>
  <action>
Install all Phase 3 dependencies:

```bash
npm install monaco-editor monaco-yaml vite-plugin-monaco-editor js-yaml vanjs-core file-saver @json2csv/plainjs
npm install -D @types/file-saver
```

Verify package.json includes:
- monaco-editor (code editor)
- monaco-yaml (YAML language support)
- vite-plugin-monaco-editor (worker bundling)
- js-yaml (YAML parsing)
- vanjs-core (reactive UI primitives)
- file-saver (file export)
- @json2csv/plainjs (CSV conversion)
  </action>
  <verify>
Run `npm ls monaco-editor monaco-yaml vanjs-core js-yaml file-saver @json2csv/plainjs` - all should show installed versions.
Run `npm run build` to ensure no resolution errors.
  </verify>
  <done>All dependencies installed and resolvable by TypeScript.</done>
</task>

<task type="auto">
  <name>Task 2: Configure Monaco in WXT and add i18n</name>
  <files>wxt.config.ts, _locales/en/messages.json, _locales/fr/messages.json</files>
  <action>
**Update wxt.config.ts:**

1. Import vite-plugin-monaco-editor
2. Add vite() function with monaco plugin configuration
3. Add default_locale: 'en' to manifest

```typescript
import { defineConfig } from 'wxt';
import monacoEditorPlugin from 'vite-plugin-monaco-editor';

export default defineConfig({
  manifest: {
    name: '__MSG_appName__',
    description: '__MSG_appDescription__',
    default_locale: 'en',
    // ... existing config
  },
  vite: () => ({
    plugins: [
      (monacoEditorPlugin as any).default({
        languageWorkers: ['editorWorkerService'],
      }),
    ],
  }),
});
```

Note: Use `(monacoEditorPlugin as any).default` because the package has ESM/CJS interop issues.

**Create _locales/en/messages.json:**

Include all UI strings for Phase 3:
- appName, appDescription
- scriptListTitle, searchPlaceholder
- Recording view strings
- Editor view strings (save, export, import)
- Execution view strings (running, step X of Y, copyJson, copyCsv)
- Context zone strings
- Common buttons (cancel, confirm, delete)

**Create _locales/fr/messages.json:**

Same keys as English, translated to French.
  </action>
  <verify>
1. Run `npm run build` - should complete without errors
2. Check built extension loads in Chrome with correct name from i18n
3. Console should not show Monaco worker errors
  </verify>
  <done>
- wxt.config.ts has Monaco plugin and default_locale
- _locales/en/messages.json exists with all Phase 3 strings
- _locales/fr/messages.json exists with French translations
- Extension build succeeds
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm ls monaco-editor` shows installed version
3. Load extension in Chrome - name should appear as "Browserlet" (from i18n)
4. No console errors about Monaco workers
</verification>

<success_criteria>
- All Phase 3 dependencies installed
- Monaco plugin configured in wxt.config.ts
- i18n locale files created for English and French
- Extension builds and loads successfully
</success_criteria>

<output>
After completion, create `.planning/phases/03-side-panel/03-01-SUMMARY.md`
</output>
